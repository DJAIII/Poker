{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SKYPCPRO/Documents/poker/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\";\r\nimport { twMerge } from \"tailwind-merge\";\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n    return twMerge(clsx(inputs));\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACtC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACxB"}},
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SKYPCPRO/Documents/poker/components/PlayingCard.tsx"],"sourcesContent":["import React from 'react';\r\nimport { CardType, Rank, Suite } from '@/lib/types';\r\nimport { cn } from '@/lib/utils';\r\nimport { Heart, Diamond, Club, Spade } from 'lucide-react';\r\n\r\ninterface PlayingCardProps {\r\n    card?: CardType; // If null/undefined, shows card back or empty slot\r\n    rank?: Rank;\r\n    suit?: Suite;\r\n    selected?: boolean;\r\n    disabled?: boolean;\r\n    onClick?: () => void;\r\n    className?: string;\r\n    isBack?: boolean;\r\n    isEmpty?: boolean;\r\n}\r\n\r\nconst SUIT_ICONS = {\r\n    'H': <Heart className=\"w-full h-full fill-current\" />,\r\n    'D': <Diamond className=\"w-full h-full fill-current\" />,\r\n    'C': <Club className=\"w-full h-full fill-current\" />,\r\n    'S': <Spade className=\"w-full h-full fill-current\" />,\r\n};\r\n\r\nconst SUIT_COLORS = {\r\n    'H': 'text-red-500',\r\n    'D': 'text-red-500',\r\n    'C': 'text-slate-900',\r\n    'S': 'text-slate-900',\r\n};\r\n\r\nconst PlayingCard: React.FC<PlayingCardProps> = ({\r\n    card,\r\n    rank,\r\n    suit,\r\n    selected,\r\n    disabled,\r\n    onClick,\r\n    className,\r\n    isBack = false,\r\n    isEmpty = false\r\n}) => {\r\n    const finalRank = card?.rank || rank;\r\n    const finalSuit = card?.suit || suit;\r\n\r\n    if (isEmpty) {\r\n        return (\r\n            <div\r\n                onClick={onClick}\r\n                className={cn(\r\n                    \"w-14 h-20 rounded-md border-2 border-dashed border-white/20 bg-white/5 flex items-center justify-center cursor-pointer hover:bg-white/10 transition-colors\",\r\n                    className\r\n                )}\r\n            >\r\n                <span className=\"text-xs text-white/30 font-medium\">빈 슬롯</span>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (isBack) {\r\n        return (\r\n            <div className={cn(\r\n                \"w-14 h-20 rounded-md bg-white border border-slate-200 shadow-sm relative overflow-hidden\",\r\n                className\r\n            )}>\r\n                <div className=\"absolute inset-1 bg-red-600 rounded-sm\"\r\n                    style={{ backgroundImage: \"repeating-linear-gradient(45deg, #cc0000 0, #cc0000 10px, #b30000 10px, #b30000 20px)\" }}></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!finalRank || !finalSuit) return null;\r\n\r\n    return (\r\n        <div\r\n            onClick={!disabled ? onClick : undefined}\r\n            className={cn(\r\n                \"relative w-14 h-20 bg-white rounded-md shadow-sm border border-slate-200 flex flex-col items-center justify-between p-1 select-none transition-all duration-200\",\r\n                SUIT_COLORS[finalSuit],\r\n                selected && \"ring-4 ring-green-500 ring-offset-2 ring-offset-slate-900 z-10 scale-110\",\r\n                disabled && \"opacity-40 grayscale cursor-not-allowed\",\r\n                !disabled && \"cursor-pointer hover:-translate-y-1 hover:shadow-md\",\r\n                className\r\n            )}\r\n        >\r\n            <div className=\"text-sm font-bold leading-none self-start ml-0.5\">{finalRank}</div>\r\n            <div className=\"w-6 h-6 absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 opacity-20\">\r\n                {SUIT_ICONS[finalSuit]}\r\n            </div>\r\n            <div className=\"w-3 h-3 self-end mr-0.5 mb-0.5\">\r\n                {SUIT_ICONS[finalSuit]}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PlayingCard;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;;;;AAcA,MAAM,aAAa;IACf,mBAAK,8OAAC,6MAAK;QAAC,WAAU;;;;;;IACtB,mBAAK,8OAAC,mNAAO;QAAC,WAAU;;;;;;IACxB,mBAAK,8OAAC,0MAAI;QAAC,WAAU;;;;;;IACrB,mBAAK,8OAAC,6MAAK;QAAC,WAAU;;;;;;AAC1B;AAEA,MAAM,cAAc;IAChB,KAAK;IACL,KAAK;IACL,KAAK;IACL,KAAK;AACT;AAEA,MAAM,cAA0C,CAAC,EAC7C,IAAI,EACJ,IAAI,EACJ,IAAI,EACJ,QAAQ,EACR,QAAQ,EACR,OAAO,EACP,SAAS,EACT,SAAS,KAAK,EACd,UAAU,KAAK,EAClB;IACG,MAAM,YAAY,MAAM,QAAQ;IAChC,MAAM,YAAY,MAAM,QAAQ;IAEhC,IAAI,SAAS;QACT,qBACI,8OAAC;YACG,SAAS;YACT,WAAW,IAAA,kHAAE,EACT,8JACA;sBAGJ,cAAA,8OAAC;gBAAK,WAAU;0BAAoC;;;;;;;;;;;IAGhE;IAEA,IAAI,QAAQ;QACR,qBACI,8OAAC;YAAI,WAAW,IAAA,kHAAE,EACd,4FACA;sBAEA,cAAA,8OAAC;gBAAI,WAAU;gBACX,OAAO;oBAAE,iBAAiB;gBAAwF;;;;;;;;;;;IAGlI;IAEA,IAAI,CAAC,aAAa,CAAC,WAAW,OAAO;IAErC,qBACI,8OAAC;QACG,SAAS,CAAC,WAAW,UAAU;QAC/B,WAAW,IAAA,kHAAE,EACT,mKACA,WAAW,CAAC,UAAU,EACtB,YAAY,4EACZ,YAAY,2CACZ,CAAC,YAAY,uDACb;;0BAGJ,8OAAC;gBAAI,WAAU;0BAAoD;;;;;;0BACnE,8OAAC;gBAAI,WAAU;0BACV,UAAU,CAAC,UAAU;;;;;;0BAE1B,8OAAC;gBAAI,WAAU;0BACV,UAAU,CAAC,UAAU;;;;;;;;;;;;AAItC;uCAEe"}},
    {"offset": {"line": 155, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SKYPCPRO/Documents/poker/components/CardSelector.tsx"],"sourcesContent":["import React from 'react';\r\nimport { CardType, Rank, Suite } from '@/lib/types';\r\nimport PlayingCard from './PlayingCard';\r\n\r\ninterface CardSelectorProps {\r\n    selectedCards: CardType[];\r\n    onSelect: (card: CardType) => void;\r\n}\r\n\r\nconst RANKS: Rank[] = ['2', '3', '4', '5', '6', '7', '8', '9', 'T', 'J', 'Q', 'K', 'A'];\r\nconst SUITS: Suite[] = ['S', 'H', 'D', 'C']; // Spades, Hearts, Diamonds, Clubs order usually\r\n\r\nconst CardSelector: React.FC<CardSelectorProps> = ({ selectedCards, onSelect }) => {\r\n\r\n    const isSelected = (rank: Rank, suit: Suite) => {\r\n        return selectedCards.some(c => c.rank === rank && c.suit === suit);\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-col gap-4\">\r\n            {SUITS.map(suit => (\r\n                <div key={suit} className=\"flex flex-wrap gap-2 justify-center sm:justify-start\">\r\n                    {RANKS.map(rank => {\r\n                        const selected = isSelected(rank, suit);\r\n                        // Construct card object on fly\r\n                        const cardObj: CardType = { rank, suit, toString: () => `${rank}${suit}` };\r\n\r\n                        return (\r\n                            <PlayingCard\r\n                                key={`${rank}${suit}`}\r\n                                rank={rank}\r\n                                suit={suit}\r\n                                selected={selected}\r\n                                disabled={selected} // Disable if selected (so it appears \"taken\")\r\n                                // Actually, if selected, we might want to allow deselecting here?\r\n                                // But the requirement says \"Highlight selected cards and dim unavailable ones\".\r\n                                // Usually \"dim unavailable\" means \"already selected elsewhere\".\r\n                                // If I click it again, it might deselect or do nothing.\r\n                                // The `page.tsx` ignores duplicate selection.\r\n                                // Let's keep it disabled if selected.\r\n                                onClick={() => onSelect(cardObj)}\r\n                                className=\"w-10 h-14 text-xs sm:w-12 sm:h-16\" // Smaller in grid\r\n                            />\r\n                        );\r\n                    })}\r\n                </div>\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default CardSelector;\r\n"],"names":[],"mappings":";;;;;AAEA;;;AAOA,MAAM,QAAgB;IAAC;IAAK;IAAK;IAAK;IAAK;IAAK;IAAK;IAAK;IAAK;IAAK;IAAK;IAAK;IAAK;CAAI;AACvF,MAAM,QAAiB;IAAC;IAAK;IAAK;IAAK;CAAI,EAAE,gDAAgD;AAE7F,MAAM,eAA4C,CAAC,EAAE,aAAa,EAAE,QAAQ,EAAE;IAE1E,MAAM,aAAa,CAAC,MAAY;QAC5B,OAAO,cAAc,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,QAAQ,EAAE,IAAI,KAAK;IACjE;IAEA,qBACI,8OAAC;QAAI,WAAU;kBACV,MAAM,GAAG,CAAC,CAAA,qBACP,8OAAC;gBAAe,WAAU;0BACrB,MAAM,GAAG,CAAC,CAAA;oBACP,MAAM,WAAW,WAAW,MAAM;oBAClC,+BAA+B;oBAC/B,MAAM,UAAoB;wBAAE;wBAAM;wBAAM,UAAU,IAAM,GAAG,OAAO,MAAM;oBAAC;oBAEzE,qBACI,8OAAC,qIAAW;wBAER,MAAM;wBACN,MAAM;wBACN,UAAU;wBACV,UAAU;wBACV,kEAAkE;wBAClE,gFAAgF;wBAChF,gEAAgE;wBAChE,wDAAwD;wBACxD,8CAA8C;wBAC9C,sCAAsC;wBACtC,SAAS,IAAM,SAAS;wBACxB,WAAU;uBAZL,GAAG,OAAO,MAAM;;;;;gBAejC;eAvBM;;;;;;;;;;AA4B1B;uCAEe"}},
    {"offset": {"line": 235, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SKYPCPRO/Documents/poker/components/PokerTable.tsx"],"sourcesContent":["import React from 'react';\r\nimport { CardType } from '@/lib/types';\r\nimport PlayingCard from './PlayingCard';\r\nimport { X } from 'lucide-react';\r\n\r\ninterface PokerTableProps {\r\n    holeCards: CardType[];\r\n    communityCards: CardType[];\r\n    activeSelection?: string | null;\r\n    onRemoveHole: (index: number) => void;\r\n    onRemoveCommunity: (index: number) => void;\r\n}\r\n\r\nconst PokerTable: React.FC<PokerTableProps> = ({\r\n    holeCards,\r\n    communityCards,\r\n    activeSelection,\r\n    onRemoveHole,\r\n    onRemoveCommunity\r\n}) => {\r\n    return (\r\n        <div className=\"w-full h-full flex flex-col items-center justify-between py-2 relative z-10\">\r\n\r\n            {/* Community Cards Area */}\r\n            <div className=\"flex flex-col items-center space-y-2 mt-8\">\r\n                <div className=\"text-white/50 text-xs font-semibold tracking-wider uppercase\">커뮤니티 카드</div>\r\n                <div className=\"flex gap-2 md:gap-4\">\r\n                    {[0, 1, 2, 3, 4].map((index) => (\r\n                        <div key={`community-${index}`} className=\"relative group\">\r\n                            {communityCards[index] ? (\r\n                                <>\r\n                                    <PlayingCard\r\n                                        card={communityCards[index]}\r\n                                        className=\"shadow-xl\"\r\n                                    />\r\n                                    <button\r\n                                        onClick={() => onRemoveCommunity(index)}\r\n                                        className=\"absolute -top-2 -right-2 bg-slate-900 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition-opacity shadow-lg border border-white/10\"\r\n                                    >\r\n                                        <X size={12} />\r\n                                    </button>\r\n                                    {/* Label for Flop/Turn/River */}\r\n                                    <div className=\"absolute -bottom-5 left-1/2 -translate-x-1/2 text-[10px] text-white/40 font-mono whitespace-nowrap\">\r\n                                        {index < 3 ? '플랍' : index === 3 ? '턴' : '리버'}\r\n                                    </div>\r\n                                </>\r\n                            ) : (\r\n                                <PlayingCard isEmpty />\r\n                            )}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Center Pot / Info Area (Visual decoration) */}\r\n            <div className=\"text-white/10 italic text-sm font-serif select-none\">\r\n                텍사스 홀덤\r\n            </div>\r\n\r\n            {/* Player Area */}\r\n            <div className=\"flex flex-col items-center space-y-2 mb-4\">\r\n                <div className=\"bg-slate-900/80 px-3 py-1 rounded-full text-xs font-bold text-white border border-white/10 flex items-center gap-1.5 mb-2\">\r\n                    <div className=\"w-2 h-2 rounded-full bg-green-500 animate-pulse\" />\r\n                    내 핸드 (Hero)\r\n                </div>\r\n\r\n                <div className=\"flex gap-2 md:gap-4 p-4 rounded-xl bg-black/20 backdrop-blur-sm border border-white/5\">\r\n                    {[0, 1].map((index) => (\r\n                        <div key={`hole-${index}`} className=\"relative group\">\r\n                            {holeCards[index] ? (\r\n                                <>\r\n                                    <PlayingCard\r\n                                        card={holeCards[index]}\r\n                                        className=\"shadow-2xl ring-2 ring-black/20\"\r\n                                    />\r\n                                    <button\r\n                                        onClick={() => onRemoveHole(index)}\r\n                                        className=\"absolute -top-2 -right-2 bg-slate-900 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition-opacity shadow-lg border border-white/10\"\r\n                                    >\r\n                                        <X size={12} />\r\n                                    </button>\r\n                                </>\r\n                            ) : (\r\n                                <PlayingCard isEmpty />\r\n                            )}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PokerTable;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;;AAUA,MAAM,aAAwC,CAAC,EAC3C,SAAS,EACT,cAAc,EACd,eAAe,EACf,YAAY,EACZ,iBAAiB,EACpB;IACG,qBACI,8OAAC;QAAI,WAAU;;0BAGX,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;kCAA+D;;;;;;kCAC9E,8OAAC;wBAAI,WAAU;kCACV;4BAAC;4BAAG;4BAAG;4BAAG;4BAAG;yBAAE,CAAC,GAAG,CAAC,CAAC,sBAClB,8OAAC;gCAA+B,WAAU;0CACrC,cAAc,CAAC,MAAM,iBAClB;;sDACI,8OAAC,qIAAW;4CACR,MAAM,cAAc,CAAC,MAAM;4CAC3B,WAAU;;;;;;sDAEd,8OAAC;4CACG,SAAS,IAAM,kBAAkB;4CACjC,WAAU;sDAEV,cAAA,8OAAC,iMAAC;gDAAC,MAAM;;;;;;;;;;;sDAGb,8OAAC;4CAAI,WAAU;sDACV,QAAQ,IAAI,OAAO,UAAU,IAAI,MAAM;;;;;;;iEAIhD,8OAAC,qIAAW;oCAAC,OAAO;;;;;;+BAnBlB,CAAC,UAAU,EAAE,OAAO;;;;;;;;;;;;;;;;0BA2B1C,8OAAC;gBAAI,WAAU;0BAAsD;;;;;;0BAKrE,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;;0CACX,8OAAC;gCAAI,WAAU;;;;;;4BAAoD;;;;;;;kCAIvE,8OAAC;wBAAI,WAAU;kCACV;4BAAC;4BAAG;yBAAE,CAAC,GAAG,CAAC,CAAC,sBACT,8OAAC;gCAA0B,WAAU;0CAChC,SAAS,CAAC,MAAM,iBACb;;sDACI,8OAAC,qIAAW;4CACR,MAAM,SAAS,CAAC,MAAM;4CACtB,WAAU;;;;;;sDAEd,8OAAC;4CACG,SAAS,IAAM,aAAa;4CAC5B,WAAU;sDAEV,cAAA,8OAAC,iMAAC;gDAAC,MAAM;;;;;;;;;;;;iEAIjB,8OAAC,qIAAW;oCAAC,OAAO;;;;;;+BAflB,CAAC,KAAK,EAAE,OAAO;;;;;;;;;;;;;;;;;;;;;;AAwBjD;uCAEe"}},
    {"offset": {"line": 423, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SKYPCPRO/Documents/poker/components/OddsDisplay.tsx"],"sourcesContent":["import React from 'react';\r\nimport { SimulationResult } from '@/lib/types';\r\nimport { Trophy, Ban, RefreshCw, BarChart } from 'lucide-react';\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface OddsDisplayProps {\r\n    result: SimulationResult;\r\n}\r\n\r\nconst OddsDisplay: React.FC<OddsDisplayProps> = ({ result }) => {\r\n    // Sort hand breakdown by likelihood\r\n    const sortedBreakdown = Object.entries(result.handBreakdown || {})\r\n        .sort(([, a], [, b]) => b - a)\r\n        .slice(0, 6);\r\n\r\n    return (\r\n        <div className=\"bg-slate-900 border border-white/10 rounded-xl p-6 shadow-xl animate-in fade-in zoom-in-95 duration-300\">\r\n\r\n            {/* Title */}\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n                <h2 className=\"text-xl font-bold text-white\">시뮬레이션 결과</h2>\r\n                <div className=\"text-xs text-slate-500 font-mono\">20,000 핸드</div>\r\n            </div>\r\n\r\n            {/* Main Stats Grid */}\r\n            <div className=\"grid grid-cols-3 gap-2 mb-8\">\r\n\r\n                {/* Win */}\r\n                <div className=\"flex flex-col items-center p-3 bg-slate-800/50 rounded-lg border border-white/5\">\r\n                    <Trophy size={18} className=\"text-emerald-500 mb-2\" />\r\n                    <span className=\"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1\">승리</span>\r\n                    <span className=\"text-2xl md:text-3xl font-black text-white\">{result.win}%</span>\r\n                </div>\r\n\r\n                {/* Tie */}\r\n                <div className=\"flex flex-col items-center p-3 bg-slate-800/50 rounded-lg border border-white/5\">\r\n                    <RefreshCw size={18} className=\"text-sky-500 mb-2\" />\r\n                    <span className=\"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1\">무승부</span>\r\n                    <span className=\"text-2xl md:text-3xl font-black text-white\">{result.tie}%</span>\r\n                </div>\r\n\r\n                {/* Lose */}\r\n                <div className=\"flex flex-col items-center p-3 bg-slate-800/50 rounded-lg border border-white/5\">\r\n                    <Ban size={18} className=\"text-rose-500 mb-2\" />\r\n                    <span className=\"text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1\">패배</span>\r\n                    <span className=\"text-2xl md:text-3xl font-black text-white\">{result.lose}%</span>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"h-px bg-white/10 w-full mb-6\" />\r\n\r\n            {/* Hand Breakdown */}\r\n            <div>\r\n                <div className=\"flex items-center gap-2 mb-4 text-slate-300\">\r\n                    <BarChart size={16} />\r\n                    <h3 className=\"text-sm font-bold uppercase tracking-wide\">족보별 승리 확률</h3>\r\n                </div>\r\n\r\n                <div className=\"space-y-3\">\r\n                    {sortedBreakdown.length > 0 ? sortedBreakdown.map(([handType, probability]) => (\r\n                        <div key={handType} className=\"group cursor-default\">\r\n                            <div className=\"flex justify-between text-xs mb-1.5\">\r\n                                <span className=\"text-slate-400 font-medium group-hover:text-emerald-400 transition-colors\">{handType}</span>\r\n                                <span className=\"font-mono text-slate-200\">{probability}%</span>\r\n                            </div>\r\n                            <div className=\"w-full bg-slate-800 rounded-full h-1.5 overflow-hidden\">\r\n                                <div\r\n                                    className={cn(\r\n                                        \"h-full rounded-full transition-all duration-700 ease-out\",\r\n                                        probability > 15 ? \"bg-emerald-500\" :\r\n                                            probability > 5 ? \"bg-emerald-600\" : \"bg-emerald-800\"\r\n                                    )}\r\n                                    style={{ width: `${Math.min(probability * 2.5, 100)}%` }} // Visual scaling\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    )) : (\r\n                        <div className=\"text-center text-slate-500 text-xs py-4 italic\">\r\n                            시뮬레이션 데이터 없음.\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default OddsDisplay;\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AACA;;;;AAMA,MAAM,cAA0C,CAAC,EAAE,MAAM,EAAE;IACvD,oCAAoC;IACpC,MAAM,kBAAkB,OAAO,OAAO,CAAC,OAAO,aAAa,IAAI,CAAC,GAC3D,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE,GAAG,EAAE,GAAK,IAAI,GAC3B,KAAK,CAAC,GAAG;IAEd,qBACI,8OAAC;QAAI,WAAU;;0BAGX,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAG,WAAU;kCAA+B;;;;;;kCAC7C,8OAAC;wBAAI,WAAU;kCAAmC;;;;;;;;;;;;0BAItD,8OAAC;gBAAI,WAAU;;kCAGX,8OAAC;wBAAI,WAAU;;0CACX,8OAAC,gNAAM;gCAAC,MAAM;gCAAI,WAAU;;;;;;0CAC5B,8OAAC;gCAAK,WAAU;0CAAsE;;;;;;0CACtF,8OAAC;gCAAK,WAAU;;oCAA8C,OAAO,GAAG;oCAAC;;;;;;;;;;;;;kCAI7E,8OAAC;wBAAI,WAAU;;0CACX,8OAAC,6NAAS;gCAAC,MAAM;gCAAI,WAAU;;;;;;0CAC/B,8OAAC;gCAAK,WAAU;0CAAsE;;;;;;0CACtF,8OAAC;gCAAK,WAAU;;oCAA8C,OAAO,GAAG;oCAAC;;;;;;;;;;;;;kCAI7E,8OAAC;wBAAI,WAAU;;0CACX,8OAAC,uMAAG;gCAAC,MAAM;gCAAI,WAAU;;;;;;0CACzB,8OAAC;gCAAK,WAAU;0CAAsE;;;;;;0CACtF,8OAAC;gCAAK,WAAU;;oCAA8C,OAAO,IAAI;oCAAC;;;;;;;;;;;;;;;;;;;0BAIlF,8OAAC;gBAAI,WAAU;;;;;;0BAGf,8OAAC;;kCACG,8OAAC;wBAAI,WAAU;;0CACX,8OAAC,0NAAQ;gCAAC,MAAM;;;;;;0CAChB,8OAAC;gCAAG,WAAU;0CAA4C;;;;;;;;;;;;kCAG9D,8OAAC;wBAAI,WAAU;kCACV,gBAAgB,MAAM,GAAG,IAAI,gBAAgB,GAAG,CAAC,CAAC,CAAC,UAAU,YAAY,iBACtE,8OAAC;gCAAmB,WAAU;;kDAC1B,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;gDAAK,WAAU;0DAA6E;;;;;;0DAC7F,8OAAC;gDAAK,WAAU;;oDAA4B;oDAAY;;;;;;;;;;;;;kDAE5D,8OAAC;wCAAI,WAAU;kDACX,cAAA,8OAAC;4CACG,WAAW,IAAA,kHAAE,EACT,4DACA,cAAc,KAAK,mBACf,cAAc,IAAI,mBAAmB;4CAE7C,OAAO;gDAAE,OAAO,GAAG,KAAK,GAAG,CAAC,cAAc,KAAK,KAAK,CAAC,CAAC;4CAAC;;;;;;;;;;;;+BAZzD;;;;0FAiBV,8OAAC;4BAAI,WAAU;sCAAiD;;;;;;;;;;;;;;;;;;;;;;;AASxF;uCAEe"}},
    {"offset": {"line": 703, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SKYPCPRO/Documents/poker/lib/poker-engine.ts"],"sourcesContent":["import { CardType, SimulationResult, Rank, Suite } from './types';\r\n\r\nconst RANKS: Rank[] = ['2', '3', '4', '5', '6', '7', '8', '9', 'T', 'J', 'Q', 'K', 'A'];\r\nconst SUITS: Suite[] = ['H', 'D', 'C', 'S'];\r\n\r\nfunction getCardIndex(card: CardType): number {\r\n    const r = RANKS.indexOf(card.rank);\r\n    const s = SUITS.indexOf(card.suit);\r\n    if (r === -1 || s === -1) throw new Error(`Invalid card: ${card.rank}${card.suit}`);\r\n    return s * 13 + r;\r\n}\r\n\r\nfunction solveHand(cards: number[]): number {\r\n    const ranks = new Array(13).fill(0);\r\n    const suits = new Array(4).fill(0);\r\n    const flushRanks = [[], [], [], []] as number[][];\r\n\r\n    for (const c of cards) {\r\n        const r = c % 13;\r\n        const s = Math.floor(c / 13);\r\n        ranks[r]++;\r\n        suits[s]++;\r\n        flushRanks[s].push(r);\r\n    }\r\n\r\n    let flushSuit = -1;\r\n    for (let s = 0; s < 4; s++) if (suits[s] >= 5) flushSuit = s;\r\n\r\n    // Straight Flush\r\n    if (flushSuit !== -1) {\r\n        const sRanks = flushRanks[flushSuit].sort((a, b) => a - b);\r\n        let seq = 1;\r\n        let bestSF = -1;\r\n        for (let i = 0; i < sRanks.length; i++) {\r\n            if (i > 0 && sRanks[i] === sRanks[i - 1] + 1) seq++;\r\n            else seq = 1;\r\n            if (seq >= 5) bestSF = sRanks[i];\r\n        }\r\n        // Wheel check A,2,3,4,5 -> 12,0,1,2,3. If 0,1,2,3 and 12 exist.\r\n        if (sRanks.includes(12) && sRanks.includes(0) && sRanks.includes(1) && sRanks.includes(2) && sRanks.includes(3)) {\r\n            if (bestSF === -1) bestSF = 3; // 5-high SF\r\n            // Note: 5-high SF is lower than any other SF (lowest normal is 6-high: 2,3,4,5,6).\r\n            // 6-high SF ending at 4 (rank 4 is 6).\r\n            // 5-high SF ends at 3. Correct.\r\n        }\r\n\r\n        if (bestSF !== -1) return 8000000 + bestSF;\r\n    }\r\n\r\n    // Four of a Kind\r\n    for (let r = 12; r >= 0; r--) {\r\n        if (ranks[r] === 4) {\r\n            for (let k = 12; k >= 0; k--) if (ranks[k] && k !== r) return 7000000 + r * 100 + k;\r\n        }\r\n    }\r\n\r\n    // Full House\r\n    let trips = -1;\r\n    let pair = -1;\r\n    for (let r = 12; r >= 0; r--) {\r\n        if (ranks[r] >= 3) {\r\n            if (trips === -1) trips = r;\r\n            else if (pair === -1) pair = r;\r\n        } else if (ranks[r] >= 2) {\r\n            if (pair === -1) pair = r;\r\n        }\r\n    }\r\n    if (trips !== -1 && pair !== -1) return 6000000 + trips * 100 + pair;\r\n\r\n    // Flush\r\n    if (flushSuit !== -1) {\r\n        const f = flushRanks[flushSuit].sort((a, b) => b - a);\r\n        return 5000000 + f[0] * 10000 + f[1] * 1000 + f[2] * 100 + f[3] * 10 + f[4];\r\n    }\r\n\r\n    // Straight\r\n    const allRanks = [];\r\n    for (let r = 0; r < 13; r++) if (ranks[r]) allRanks.push(r);\r\n\r\n    let seq = 1;\r\n    let bestStr = -1;\r\n    for (let i = 0; i < allRanks.length; i++) {\r\n        if (i > 0 && allRanks[i] === allRanks[i - 1] + 1) seq++;\r\n        else seq = 1;\r\n        if (seq >= 5) bestStr = allRanks[i];\r\n    }\r\n    if (allRanks.includes(12) && allRanks.includes(0) && allRanks.includes(1) && allRanks.includes(2) && allRanks.includes(3)) {\r\n        if (bestStr === -1) bestStr = 3;\r\n    }\r\n    if (bestStr !== -1) return 4000000 + bestStr;\r\n\r\n    // Three of a Kind\r\n    if (trips !== -1) {\r\n        let k1 = -1, k2 = -1;\r\n        for (let r = 12; r >= 0; r--) {\r\n            if (ranks[r] && r !== trips) {\r\n                if (k1 === -1) k1 = r;\r\n                else if (k2 === -1) { k2 = r; break; }\r\n            }\r\n        }\r\n        return 3000000 + trips * 10000 + k1 * 100 + k2;\r\n    }\r\n\r\n    // Two Pair\r\n    let p1 = -1, p2 = -1;\r\n    for (let r = 12; r >= 0; r--) {\r\n        if (ranks[r] >= 2) {\r\n            if (p1 === -1) p1 = r;\r\n            else if (p2 === -1) { p2 = r; break; }\r\n        }\r\n    }\r\n    if (p1 !== -1 && p2 !== -1) {\r\n        let k = -1;\r\n        for (let r = 12; r >= 0; r--) if (ranks[r] && r !== p1 && r !== p2) { k = r; break; }\r\n        return 2000000 + p1 * 10000 + p2 * 100 + k;\r\n    }\r\n\r\n    // One Pair\r\n    if (p1 !== -1) { // p1 is the highest pair found above\r\n        // Need to find 3 kickers\r\n        let k1 = -1, k2 = -1, k3 = -1;\r\n        for (let r = 12; r >= 0; r--) {\r\n            if (ranks[r] && r !== p1) {\r\n                if (k1 === -1) k1 = r;\r\n                else if (k2 === -1) k2 = r;\r\n                else if (k3 === -1) { k3 = r; break; }\r\n            }\r\n        }\r\n        return 1000000 + p1 * 100000 + k1 * 1000 + k2 * 100 + k3;\r\n    }\r\n\r\n    // High Card\r\n    const high = [];\r\n    for (let r = 12; r >= 0; r--) if (ranks[r]) high.push(r);\r\n    while (high.length < 5) high.push(0); // Should not happen for 5+ cards\r\n    return high[0] * 100000 + high[1] * 10000 + high[2] * 1000 + high[3] * 100 + high[4];\r\n}\r\n\r\nexport async function calculateOdds(\r\n    holeCards: CardType[],\r\n    communityCards: CardType[],\r\n    numOpponents: number\r\n): Promise<SimulationResult> {\r\n\r\n    const myHand = holeCards.map(getCardIndex);\r\n    const board = communityCards.map(getCardIndex);\r\n\r\n    // Deck: all cards minus known\r\n    const fullDeck = Array.from({ length: 52 }, (_, i) => i);\r\n    const knownCards = new Set([...myHand, ...board]);\r\n    const deck = fullDeck.filter(c => !knownCards.has(c));\r\n\r\n    let wins = 0;\r\n    let ties = 0;\r\n    const iterations = 20000;\r\n    const handBreakdown: { [key: string]: number } = {};\r\n\r\n    // Reusable arrays\r\n    const currentDeck = new Array(deck.length);\r\n\r\n    for (let i = 0; i < iterations; i++) {\r\n        // Shuffle deck (partial)\r\n        for (let j = 0; j < deck.length; j++) currentDeck[j] = deck[j];\r\n\r\n        let deckIdx = currentDeck.length;\r\n        const cardsNeeded = (2 * numOpponents) + (5 - board.length);\r\n\r\n        // Fisher-Yates-ish for needed cards\r\n        for (let j = 0; j < cardsNeeded; j++) {\r\n            const rand = Math.floor(Math.random() * deckIdx);\r\n            deckIdx--;\r\n            const temp = currentDeck[deckIdx];\r\n            currentDeck[deckIdx] = currentDeck[rand];\r\n            currentDeck[rand] = temp;\r\n        }\r\n\r\n        // Deal\r\n        let dealPtr = currentDeck.length - 1;\r\n\r\n        // Opponents\r\n        const oppScores = [];\r\n        for (let o = 0; o < numOpponents; o++) {\r\n            const h1 = currentDeck[dealPtr--];\r\n            const h2 = currentDeck[dealPtr--];\r\n            // Board\r\n            let runBoard = [...board];\r\n            // Complete board from currentDeck (using remaining dealt cards?)\r\n            // Wait, dealing order logic: Opponents get 2 cards, then Board gets remainder.\r\n            // We shuffled enough cards.\r\n            // We need to use the SAME board for everyone.\r\n            // So we should pick board cards first or last.\r\n            // Let's pick board cards first from the shuffled set?\r\n            // Order doesn't matter for MC.\r\n            // But we must ensure board is same for me and opponents.\r\n            // So logic:\r\n            // 1. Pick `cardsNeeded` cards.\r\n            // 2. Assign first X to opponents, next Y to board.\r\n            // Correct.\r\n\r\n            // Wait, my loop structure was: `for (let o...)`.\r\n            // Inside loop I initialized `runBoard`.\r\n            // The board cards must be consistent for this iteration.\r\n            // So I should deal board cards *once* per iteration.\r\n        }\r\n\r\n        // Correct approach:\r\n        let ptr = currentDeck.length - 1;\r\n\r\n        // Deal Opponents\r\n        const oppHands = [];\r\n        for (let o = 0; o < numOpponents; o++) {\r\n            oppHands.push([currentDeck[ptr--], currentDeck[ptr--]]);\r\n        }\r\n\r\n        // Deal remaining Board\r\n        const runBoard = [...board];\r\n        while (runBoard.length < 5) {\r\n            runBoard.push(currentDeck[ptr--]);\r\n        }\r\n\r\n        // Eval\r\n        const myScore = solveHand([...myHand, ...runBoard]);\r\n        let opponentBestScore = -1;\r\n        for (const opp of oppHands) {\r\n            const s = solveHand([...opp, ...runBoard]);\r\n            if (s > opponentBestScore) opponentBestScore = s;\r\n        }\r\n\r\n        if (myScore > opponentBestScore) wins++;\r\n        else if (myScore === opponentBestScore) ties++;\r\n\r\n        // Breakdown\r\n        if (i < iterations) { // Track all\r\n            let type = \"하이 카드\";\r\n            if (myScore >= 8000000) type = \"스트레이트 플러시\";\r\n            else if (myScore >= 7000000) type = \"포카드\";\r\n            else if (myScore >= 6000000) type = \"풀하우스\";\r\n            else if (myScore >= 5000000) type = \"플러시\";\r\n            else if (myScore >= 4000000) type = \"스트레이트\";\r\n            else if (myScore >= 3000000) type = \"트리플\";\r\n            else if (myScore >= 2000000) type = \"투 페어\";\r\n            else if (myScore >= 1000000) type = \"원 페어\";\r\n\r\n            handBreakdown[type] = (handBreakdown[type] || 0) + 1;\r\n        }\r\n    }\r\n\r\n    // Results\r\n    const breakdownResult: { [key: string]: number } = {};\r\n    for (const k in handBreakdown) {\r\n        breakdownResult[k] = parseFloat(((handBreakdown[k] / iterations) * 100).toFixed(1));\r\n    }\r\n\r\n    return {\r\n        win: parseFloat(((wins / iterations) * 100).toFixed(1)),\r\n        tie: parseFloat(((ties / iterations) * 100).toFixed(1)),\r\n        lose: parseFloat((((iterations - wins - ties) / iterations) * 100).toFixed(1)),\r\n        equity: parseFloat((((wins + ties / 2) / iterations) * 100).toFixed(1)),\r\n        handBreakdown: breakdownResult\r\n    };\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 985, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/SKYPCPRO/Documents/poker/app/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState, useRef } from 'react';\r\nimport CardSelector from '@/components/CardSelector';\r\nimport PokerTable from '@/components/PokerTable';\r\nimport OddsDisplay from '@/components/OddsDisplay';\r\nimport { CardType, SimulationResult } from '@/lib/types';\r\nimport { calculateOdds } from '@/lib/poker-engine';\r\nimport { Loader2, RefreshCw } from 'lucide-react';\r\n\r\nexport default function Home() {\r\n    const [holeCards, setHoleCards] = useState<CardType[]>([]);\r\n    const [communityCards, setCommunityCards] = useState<CardType[]>([]);\r\n    const [numOpponents, setNumOpponents] = useState<number>(1);\r\n    const [activeSelection, setActiveSelection] = useState<'hole' | 'flop1' | 'flop2' | 'flop3' | 'turn' | 'river' | null>(null);\r\n    const [calculating, setCalculating] = useState(false);\r\n    const [result, setResult] = useState<SimulationResult | null>(null);\r\n\r\n    // Track all selected cards to disable them in selector\r\n    const allSelectedCards = [...holeCards, ...communityCards];\r\n\r\n    const handleCardSelect = (card: CardType) => {\r\n        // If card is already selected elsewhere, ignore\r\n        if (allSelectedCards.some(c => c.rank === card.rank && c.suit === card.suit)) {\r\n            return;\r\n        }\r\n\r\n        if (activeSelection === 'hole') {\r\n            if (holeCards.length < 2) {\r\n                setHoleCards([...holeCards, card]);\r\n            } else {\r\n                // Replace the last card or implement specific replacement logic\r\n                // For simplicity, just append if < 2, else do nothing (user should remove first)\r\n                // Or better: clicking a card in hand removes it.\r\n            }\r\n        } else if (activeSelection === 'flop1' || activeSelection === 'flop2' || activeSelection === 'flop3' || activeSelection === 'turn' || activeSelection === 'river') {\r\n            // Logic for specific community card slot selection would go here\r\n            // simplified below\r\n        } else {\r\n            // Auto-fill logic\r\n            if (holeCards.length < 2) {\r\n                setHoleCards([...holeCards, card]);\r\n            } else if (communityCards.length < 5) {\r\n                setCommunityCards([...communityCards, card]);\r\n            }\r\n        }\r\n\r\n        // Reset result on change\r\n        setResult(null);\r\n    };\r\n\r\n    const removeHoleCard = (index: number) => {\r\n        const newCards = [...holeCards];\r\n        newCards.splice(index, 1);\r\n        setHoleCards(newCards);\r\n        setResult(null);\r\n    };\r\n\r\n    const removeCommunityCard = (index: number) => {\r\n        const newCards = [...communityCards];\r\n        newCards.splice(index, 1);\r\n        setCommunityCards(newCards);\r\n        setResult(null);\r\n    };\r\n\r\n    const resetAll = () => {\r\n        setHoleCards([]);\r\n        setCommunityCards([]);\r\n        setResult(null);\r\n        setCalculating(false);\r\n    };\r\n\r\n    const runCalculation = async () => {\r\n        if (holeCards.length !== 2) return;\r\n\r\n        setCalculating(true);\r\n\r\n        // Use setTimeout to allow UI to update before heavy calculation\r\n        // In a real app, use a Web Worker. Here we'll use a promise wrapper.\r\n        setTimeout(async () => {\r\n            try {\r\n                const res = await calculateOdds(holeCards, communityCards, numOpponents);\r\n                setResult(res);\r\n            } catch (error) {\r\n                console.error(error);\r\n            } finally {\r\n                setCalculating(false);\r\n            }\r\n        }, 100);\r\n    };\r\n\r\n    return (\r\n        <main className=\"flex min-h-screen flex-col items-center bg-deep-slate p-4 md:p-8 selection:bg-casino-green selection:text-white\">\r\n            <div className=\"w-full max-w-6xl space-y-8\">\r\n                {/* Header */}\r\n                <header className=\"flex flex-col md:flex-row items-center justify-between border-b border-white/10 pb-6\">\r\n                    <div className=\"text-center md:text-left\">\r\n                        <h1 className=\"text-3xl font-bold bg-gradient-to-r from-green-400 to-emerald-600 bg-clip-text text-transparent\">\r\n                            포커 확률 계산기\r\n                        </h1>\r\n                        <p className=\"text-muted-foreground mt-2\">텍사스 홀덤 몬테카를로 시뮬레이션</p>\r\n                    </div>\r\n\r\n                    <div className=\"mt-4 md:mt-0 flex gap-4\">\r\n                        <button\r\n                            onClick={resetAll}\r\n                            className=\"flex items-center gap-2 px-4 py-2 rounded-lg bg-slate-800 hover:bg-slate-700 transition-colors text-sm font-medium border border-white/10\"\r\n                        >\r\n                            <RefreshCw size={16} /> 초기화\r\n                        </button>\r\n                    </div>\r\n                </header>\r\n\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-8\">\r\n                    {/* Left Column: Controls & Table */}\r\n                    <div className=\"lg:col-span-8 space-y-8\">\r\n                        {/* Poker Table Visualization */}\r\n                        <div className=\"relative aspect-[2/1] rounded-3xl bg-[#065f46] shadow-2xl border-8 border-[#3d2b1f] overflow-hidden flex items-center justify-center p-8\">\r\n                            {/* Felt Texture/Pattern */}\r\n                            <div className=\"absolute inset-0 opacity-10 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-white to-transparent pointer-events-none\"></div>\r\n\r\n                            <PokerTable\r\n                                holeCards={holeCards}\r\n                                communityCards={communityCards}\r\n                                activeSelection={activeSelection} // Pass active state if needed to highlight slots\r\n                                onRemoveHole={removeHoleCard}\r\n                                onRemoveCommunity={removeCommunityCard}\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Opponent Slider */}\r\n                        <div className=\"bg-slate-900/50 p-6 rounded-xl border border-white/10\">\r\n                            <div className=\"flex justify-between items-center mb-4\">\r\n                                <label className=\"text-sm font-medium text-slate-300\">상대 플레이어 수</label>\r\n                                <span className=\"bg-slate-800 px-3 py-1 rounded text-sm font-mono\">{numOpponents}</span>\r\n                            </div>\r\n                            <input\r\n                                type=\"range\"\r\n                                min=\"1\"\r\n                                max=\"9\"\r\n                                value={numOpponents}\r\n                                onChange={(e) => setNumOpponents(parseInt(e.target.value))}\r\n                                className=\"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-green-500\"\r\n                            />\r\n                            <div className=\"flex justify-between text-xs text-muted-foreground mt-2 px-1\">\r\n                                <span>1</span>\r\n                                <span>9</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Calculate Button */}\r\n                        <button\r\n                            onClick={runCalculation}\r\n                            disabled={holeCards.length < 2 || calculating}\r\n                            className={`w-full py-4 rounded-xl text-lg font-bold shadow-lg transition-all transform active:scale-[0.99]\r\n                        ${holeCards.length < 2\r\n                                    ? 'bg-slate-800 text-slate-500 cursor-not-allowed'\r\n                                    : 'bg-gradient-to-r from-emerald-600 to-green-500 hover:from-emerald-500 hover:to-green-400 text-white shadow-emerald-900/50 hover:shadow-emerald-900/70'\r\n                                }\r\n                    `}\r\n                        >\r\n                            {calculating ? (\r\n                                <div className=\"flex items-center justify-center gap-2\">\r\n                                    <Loader2 className=\"animate-spin\" /> 계산 중...\r\n                                </div>\r\n                            ) : (\r\n                                \"확률 계산\"\r\n                            )}\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Right Column: Card Selector & Results */}\r\n                    <div className=\"lg:col-span-4 space-y-6\">\r\n                        {result ? (\r\n                            <OddsDisplay result={result} />\r\n                        ) : (\r\n                            <div className=\"bg-slate-900/50 p-6 rounded-xl border border-white/10 min-h-[200px] flex items-center justify-center text-center text-slate-400\">\r\n                                <p>내 카드 2장을 선택하고 계산을 눌러 승률을 확인하세요.</p>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"bg-slate-900 p-4 rounded-xl border border-white/10\">\r\n                            <h3 className=\"text-sm font-medium text-slate-400 mb-4 uppercase tracking-wider\">카드 선택</h3>\r\n                            <CardSelector\r\n                                selectedCards={allSelectedCards}\r\n                                onSelect={handleCardSelect}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </main>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}